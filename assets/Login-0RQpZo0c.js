import{r as a,a3 as E,j as e}from"./reachHideWarning-CyBptXww.js";import{p as b,a4 as r,E as L}from"./ui-CqRRArJM.js";import{u as k,S as I,g as C}from"./purple-sbOdY_nb.js";import"./user-BhV8jmel.js";import"./send-CwKz-4dL.js";import"./slugify-CtJJmimd.js";import"./moment-DknGAOAq.js";const q=async(n,i)=>{try{const c=await b.auth().signInWithEmailAndPassword(n,i);return{}}catch(c){throw console.log(c.toString()),new Error("Error signing in: "+c)}},O=({})=>{const[n,i]=a.useState({}),{isLoading:c,user:f}=k(),u=!!f,[j,d]=a.useState([]),[w,g]=a.useState(!1),[m,h]=a.useState(""),[p,N]=a.useState(""),y=E(),S=()=>{setTimeout(()=>{try{document.querySelector("input.email").focus()}catch{}},512)},v=async()=>{i(null),d([]);let s=0,t={};if(m.length==0&&(s+=1,t={...t,email:{message:"Email is required"}}),p.length==0&&(s+=1,t={...t,password:{message:"Password is required"}}),console.log(s),s>0){i({...t}),console.log(n);const o=Object.keys(n)[0];setTimeout(()=>{try{document.querySelector(`input.${o}`).focus()}catch(l){console.error(l)}},512)}else{g(!0);try{await q(m,p);const{repoUrl:o,token:l,corsProxyUrl:x}=await C();localStorage.repoUrl=o,localStorage.token=l,localStorage.corsProxyUrl=x,document.location.href="/purple"}catch(o){const l=o.message.replace("FirebaseError:","").replace("Firebase:","");h(m),d([l]);try{document.querySelector("input.email").focus()}catch{}}g(!1)}};return a.useEffect(()=>{S()},[]),a.useEffect(()=>{u&&y("/")},[u]),e.jsx("div",{children:e.jsx("div",{className:"d-flex align-items-center auth px-0",children:e.jsx("div",{className:"row w-100 mx-0",children:e.jsx("div",{className:"col-lg-4 mx-auto",children:e.jsxs("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5 twx-relative",children:[e.jsx("div",{className:"brand-logo",children:e.jsx("img",{className:"twx-mx-auto",src:"/assets/images/logo/logo-dark.png",alt:"logo"})}),e.jsx("div",{className:"twx-text-center",children:e.jsx("h6",{className:"font-weight-light",children:"Login untuk melanjutkan"})}),w?e.jsx(e.Fragment,{children:e.jsx(I,{independent:!0,message:"Sedang Login"})}):e.jsxs(r,{className:"pt-3",onSubmit:s=>{try{console.log("hello"),v()}catch{}return s.preventDefault()},children:[e.jsx(r.Group,{className:"d-flex search-field",children:e.jsx(r.Control,{type:"email",placeholder:"Email",size:"lg",className:"h-auto email",onChange:s=>h(s.target.value)})}),e.jsx(r.Group,{className:"d-flex search-field",children:e.jsx(r.Control,{type:"password",placeholder:"Kata Sandi",size:"lg",className:"h-auto password",onChange:s=>N(s.target.value)})}),e.jsx(r.Group,{className:"d-flex search-field",children:j.map((s,t)=>e.jsx("div",{className:"alert alert-danger",children:s},t))}),e.jsx("div",{className:"mt-3",children:e.jsx(L,{type:"submit",size:"sm",className:"text-center btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",children:e.jsx("span",{className:"twx-mx-auto",children:"LOG IN"})})})]})]})})})})})};export{O as Login,O as default};
//# sourceMappingURL=Login-0RQpZo0c.js.map
