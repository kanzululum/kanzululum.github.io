import{r as a,a3 as E,j as e}from"./reachHideWarning-C1upC1Ww.js";import{a2 as S,a1 as r,B as b}from"./ui-yk4KGC8c.js";import{u as L,S as I}from"./purple-Ba9A06V9.js";import"./getBlocksReadingTime-3IzDSV73.js";import"./index-52qhIr3E.js";import"./slugify-CtJJmimd.js";import"./moment-DknGAOAq.js";const k=async(o,n)=>{try{const l=await S.auth().signInWithEmailAndPassword(o,n);return{}}catch(l){throw console.log(l.toString()),new Error("Error signing in: "+l)}},M=({})=>{const[o,n]=a.useState({}),{isLoading:l,user:f}=L(),d=!!f,[j,u]=a.useState([]),[N,g]=a.useState(!1),[i,h]=a.useState(""),[x,w]=a.useState(""),p=E(),v=()=>{setTimeout(()=>{try{document.querySelector("input.email").focus()}catch{}},512)},y=async()=>{n(null),u([]);let s=0,t={};if(i.length==0&&(s+=1,t={...t,email:{message:"Email is required"}}),x.length==0&&(s+=1,t={...t,password:{message:"Password is required"}}),console.log(s),s>0){n({...t}),console.log(o);const c=Object.keys(o)[0];setTimeout(()=>{try{document.querySelector(`input.${c}`).focus()}catch(m){console.error(m)}},512)}else{g(!0);try{await k(i,x),p("/")}catch(c){const m=c.message.replace("FirebaseError:","").replace("Firebase:","");h(i),u([m]);try{document.querySelector("input.email").focus()}catch{}}g(!1)}};return a.useEffect(()=>{v()},[]),a.useEffect(()=>{d&&p("/")},[d]),e.jsx("div",{children:e.jsx("div",{className:"d-flex align-items-center auth px-0",children:e.jsx("div",{className:"row w-100 mx-0",children:e.jsx("div",{className:"col-lg-4 mx-auto",children:e.jsxs("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5 twx-relative",children:[e.jsx("div",{className:"brand-logo",children:e.jsx("img",{className:"twx-mx-auto",src:"/assets/images/logo/logo-dark.png",alt:"logo"})}),e.jsx("div",{className:"twx-text-center",children:e.jsx("h6",{className:"font-weight-light",children:"Login untuk melanjutkan"})}),N?e.jsx(e.Fragment,{children:e.jsx(I,{independent:!0,message:"Sedang Login"})}):e.jsxs(r,{className:"pt-3",onSubmit:s=>{try{console.log("hello"),y()}catch{}return s.preventDefault()},children:[e.jsx(r.Group,{className:"d-flex search-field",children:e.jsx(r.Control,{type:"email",placeholder:"Email",size:"lg",className:"h-auto email",onChange:s=>h(s.target.value)})}),e.jsx(r.Group,{className:"d-flex search-field",children:e.jsx(r.Control,{type:"password",placeholder:"Kata Sandi",size:"lg",className:"h-auto password",onChange:s=>w(s.target.value)})}),e.jsx(r.Group,{className:"d-flex search-field",children:j.map((s,t)=>e.jsx("div",{className:"alert alert-danger",children:s},t))}),e.jsx("div",{className:"mt-3",children:e.jsx(b,{type:"submit",size:"sm",className:"text-center btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",children:e.jsx("span",{className:"twx-mx-auto",children:"LOG IN"})})})]})]})})})})})};export{M as Login,M as default};
