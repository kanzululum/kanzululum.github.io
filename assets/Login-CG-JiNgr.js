import{r as o,a3 as b,j as e}from"./reachHideWarning-IEH7Dx1O.js";import{a3 as L,a4 as k,a2 as f,a1 as l,B as C}from"./ui-B-CjJVzM.js";import{u as I,S as q}from"./purple-BG2O8Pt_.js";import"./getBlocksReadingTime-Dto5agJ7.js";import"./index-BqOS3TTq.js";import"./slugify-CtJJmimd.js";import"./moment-DknGAOAq.js";const P=async(n="fHv6vH2qC9BBnucPdo62")=>{const a=await L(k(f.firestore(),"settings",n)),r=a.data();return r?{...r,id:a.id}:null},F=async(n,a)=>{try{const r=await f.auth().signInWithEmailAndPassword(n,a);return{}}catch(r){throw console.log(r.toString()),new Error("Error signing in: "+r)}},M=({})=>{const[n,a]=o.useState({}),{isLoading:r,user:j}=I(),d=!!j,[w,u]=o.useState([]),[y,g]=o.useState(!1),[m,h]=o.useState(""),[x,N]=o.useState(""),v=b(),S=()=>{setTimeout(()=>{try{document.querySelector("input.email").focus()}catch{}},512)},E=async()=>{a(null),u([]);let s=0,t={};if(m.length==0&&(s+=1,t={...t,email:{message:"Email is required"}}),x.length==0&&(s+=1,t={...t,password:{message:"Password is required"}}),console.log(s),s>0){a({...t}),console.log(n);const i=Object.keys(n)[0];setTimeout(()=>{try{document.querySelector(`input.${i}`).focus()}catch(c){console.error(c)}},512)}else{g(!0);try{await F(m,x);const{repoUrl:i,token:c,corsProxyUrl:p}=await P();localStorage.repoUrl=i,localStorage.token=c,localStorage.corsProxyUrl=p,document.location.href="/purple"}catch(i){const c=i.message.replace("FirebaseError:","").replace("Firebase:","");h(m),u([c]);try{document.querySelector("input.email").focus()}catch{}}g(!1)}};return o.useEffect(()=>{S()},[]),o.useEffect(()=>{d&&v("/")},[d]),e.jsx("div",{children:e.jsx("div",{className:"d-flex align-items-center auth px-0",children:e.jsx("div",{className:"row w-100 mx-0",children:e.jsx("div",{className:"col-lg-4 mx-auto",children:e.jsxs("div",{className:"auth-form-light text-left py-5 px-4 px-sm-5 twx-relative",children:[e.jsx("div",{className:"brand-logo",children:e.jsx("img",{className:"twx-mx-auto",src:"/assets/images/logo/logo-dark.png",alt:"logo"})}),e.jsx("div",{className:"twx-text-center",children:e.jsx("h6",{className:"font-weight-light",children:"Login untuk melanjutkan"})}),y?e.jsx(e.Fragment,{children:e.jsx(q,{independent:!0,message:"Sedang Login"})}):e.jsxs(l,{className:"pt-3",onSubmit:s=>{try{console.log("hello"),E()}catch{}return s.preventDefault()},children:[e.jsx(l.Group,{className:"d-flex search-field",children:e.jsx(l.Control,{type:"email",placeholder:"Email",size:"lg",className:"h-auto email",onChange:s=>h(s.target.value)})}),e.jsx(l.Group,{className:"d-flex search-field",children:e.jsx(l.Control,{type:"password",placeholder:"Kata Sandi",size:"lg",className:"h-auto password",onChange:s=>N(s.target.value)})}),e.jsx(l.Group,{className:"d-flex search-field",children:w.map((s,t)=>e.jsx("div",{className:"alert alert-danger",children:s},t))}),e.jsx("div",{className:"mt-3",children:e.jsx(C,{type:"submit",size:"sm",className:"text-center btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",children:e.jsx("span",{className:"twx-mx-auto",children:"LOG IN"})})})]})]})})})})})};export{M as Login,M as default};
//# sourceMappingURL=Login-CG-JiNgr.js.map
